<h1> Proposal list </h1>

<div class="row">
    <span class="col-md-1 col-2"> First Name </span>
    <span class="col-md-1 col-3">
        <input type="text" [(ngModel)]="filterFirstName" (ngModelChange)="proposalSortAndFilter()" class="form-control">
    </span>

    <span class="col-md-1 col-2"> Last Name </span>
    <span class="col-md-1 col-3">
        <input type="text" [(ngModel)]="filterLastName" (ngModelChange)="proposalSortAndFilter()" class="form-control">
    </span>

    <span class="col-md-1 col-2"> Manager First Name </span>
    <span class="col-md-1 col-3">
        <input type="text" [(ngModel)]="filterManagerFirstName" (ngModelChange)="proposalSortAndFilter()" class="form-control">
    </span>

    <span class="col-md-1 col-2"> Manager Last Name </span>
    <span class="col-md-1 col-3">
        <input type="text" [(ngModel)]="filterManagerLastName" (ngModelChange)="proposalSortAndFilter()" class="form-control">
    </span>

    <span class="col-md-1 col-2"> Company profile </span>
    <span class="col-md-1 col-3">
        <input type="text" [(ngModel)]="filterCompanyProfile" (ngModelChange)="proposalSortAndFilter()" class="form-control">
    </span>

    <span class="col-md-1 col-2"> National work profile </span>
    <span class="col-md-1 col-3">
        <input type="text" [(ngModel)]="filterNationalWorkProfile" (ngModelChange)="proposalSortAndFilter()" class="form-control">
    </span>
</div>
<hr>

<div class="table-responsive">
    <table id="proposalList-table" class="table table-striped table-bordered">
        <thead class="thead-primary">
            <tr>
                <th class="text-center col-md-1" (click)="sortByColumn('userAccount.firstName', 'fisrtName'); proposalSortAndFilter()">
                   <span> First Name
                       <span class="fa fa-lg" [ngClass]="{'fa-sort':!sortingIcons.fisrtName.sort,
                                                          'fa-sort-asc':sortingIcons.fisrtName.sort && sortingIcons.fisrtName.asc,
                                                          'fa-sort-desc':sortingIcons.fisrtName.sort && !sortingIcons.fisrtName.asc}">
                       </span>
                   </span>
                </th>
                <th class="text-center col-md-1" (click)="sortByColumn('userAccount.lastName', 'lastName'); proposalSortAndFilter()">
                   <span> Last Name
                       <span class="fa fa-lg" [ngClass]="{'fa-sort':!sortingIcons.lastName.sort,
                                                          'fa-sort-asc':sortingIcons.lastName.sort && sortingIcons.lastName.asc,
                                                          'fa-sort-desc':sortingIcons.lastName.sort && !sortingIcons.lastName.asc}">
                       </span>
                   </span>
                </th>
                <th class="text-center col-md-1" (click)="sortByColumn('manager.firstName', 'managerFirstName'); proposalSortAndFilter();">
                    <span> Manager First Name
                        <span class="fa fa-lg" [ngClass]="{'fa-sort':!sortingIcons.managerFirstName.sort,
                                                          'fa-sort-asc':sortingIcons.managerFirstName.sort && sortingIcons.managerFirstName.asc,
                                                          'fa-sort-desc':sortingIcons.managerFirstName.sort && !sortingIcons.managerFirstName.asc}">
                        </span>
                    </span>
                </th>
                <th class="text-center col-md-1" (click)="sortByColumn('manager.lastName', 'managerLastName'); proposalSortAndFilter();">
                    <span> Manager Last Name
                        <span class="fa fa-lg" [ngClass]="{'fa-sort':!sortingIcons.managerLastName.sort,
                                                          'fa-sort-asc':sortingIcons.managerLastName.sort && sortingIcons.managerLastName.asc,
                                                          'fa-sort-desc':sortingIcons.managerLastName.sort && !sortingIcons.managerLastName.asc}">
                        </span>
                    </span>
                </th>
                <th class="text-center col-md-1">
                    <span> Money proposal
                   </span>
                </th>
                <th class="text-center col-md-1" (click)="sortByColumn('companyProfile', 'companyProfile'); proposalSortAndFilter();">
                    <span> Company profile
                        <span class="fa fa-lg" [ngClass]="{'fa-sort':!sortingIcons.companyProfile.sort,
                                                          'fa-sort-asc':sortingIcons.companyProfile.sort && sortingIcons.companyProfile.asc,
                                                          'fa-sort-desc':sortingIcons.companyProfile.sort && !sortingIcons.companyProfile.asc}">
                       </span>
                   </span>
                </th>
                <th class="text-center col-md-1" (click)="sortByColumn('nationalWorkProfile', 'nationalWorkProfile'); proposalSortAndFilter();">
                    <span> National work profile
                        <span class="fa fa-lg" [ngClass]="{'fa-sort':!sortingIcons.nationalWorkProfile.sort,
                                                          'fa-sort-asc':sortingIcons.nationalWorkProfile.sort && sortingIcons.nationalWorkProfile.asc,
                                                          'fa-sort-desc':sortingIcons.nationalWorkProfile.sort && !sortingIcons.nationalWorkProfile.asc}">
                       </span>
                   </span>
                </th>
                <th class="text-center col-md-1">
                    <span> Motivation
                   </span>
                </th>
                <th class="text-center col-md-1">               
                </th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let proposal of proposalSortedFiltered">
                <td class="text-center col-md-1">
                    {{ proposal.userAccount.firstName }}
                </td>
                <td class="text-center col-md-1">
                    {{ proposal.userAccount.lastName }}
                </td>
                <td class="text-center col-md-1">
                    {{ proposal.manager.firstName }}
                </td>
                <td class="text-center col-md-1">
                    {{ proposal.manager.lastName }}
                </td>
                <td class="text-center col-md-1">
                    {{ proposal.moneyProposal }}
                </td>
                <td class="text-center col-md-1">
                    {{ proposal.companyProfile }}
                </td>
                <td class="text-center col-md-1">
                    {{ proposal.nationalWorkProfile }}
                </td>
                <td class="text-center col-md-1">
                    {{ proposal.motivation }}
                </td>
                <td class="text-center col-md-1" *ngIf="proposal.status != 'Locked'">
                    <button class="btn btn-primary" (click)="openEditModal(proposal)" data-toggle="modal" data-target="#myModal">
                        <span class="fa fa-pencil" aria-hidden="true"></span>
                    </button>
                </td>
            </tr>
        </tbody>
    </table> 
</div>


<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Modal title</h4>
      </div>
      <div class="modal-body">
        Hello modal!
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>